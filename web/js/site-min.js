var nav={init:function(){function o(){var o=240;$(window).width()<768&&(o=200);var e=$("header").width()-$("header .right-nav").width()-o;$("header .title").width(e)}$("html").hasClass("touch")?$("nav .menu_btn").click(function(){$("body").hasClass("nav-open")?nav.close():nav.open()}):$("nav").hover(nav.open,nav.close),$("#bg_mask").bind("click",nav.close),$("header .right-nav").length>0&&($("header").css("width","100%"),o(),$(window).resize(function(){o()})),$("header .scroll-nav li a").each(function(){$(this).click(function(o){o.preventDefault(),mouseScroll.scrollto($($(this).attr("href")))})}),$(".tags_nav li a").addClass("trans"),$(".tags li a").addClass("trans")},open:function(){$("body").is(".pop-show")||($("#bg_mask").fadeTo(400,.6),$("body").addClass("nav-open"))},close:function(){$("body").removeClass("nav-open"),$("#bg_mask").fadeTo(400,0,function(){$("#bg_mask").hide()})}},tagsnav={init:function(){$("html").hasClass("touch")?$(".tags_btn").click(function(){$("body").hasClass("tagsnav-open")?tagsnav.close():tagsnav.open()}):$(".tags_nav").hover(tagsnav.open,tagsnav.close),$("#bg_mask").bind("click",tagsnav.close)},open:function(){$("body").is(".pop-show")||($("#bg_mask").fadeTo(400,.6),$(".tags_nav ul").show().fadeTo(400,1),$(".tags_btn").addClass("active"))},close:function(){$(".tags_btn").removeClass("active"),$("#bg_mask").hide(),$(".tags_nav ul").hide()}},sharenav={init:function(){$("html").hasClass("touch")?$(".btn_share").click(function(){$("body").hasClass("sharenav-open")?sharenav.close():sharenav.open()}):$(".share_btns").hover(sharenav.open,sharenav.close)},open:function(){$("body").addClass("sharenav-open"),$(".btn_share").addClass("active")},close:function(){$("body").removeClass("sharenav-open"),$(".btn_share").removeClass("active")}},slider={init:function(){function o(o){function t(){if(i.naturalWidth)var o=i.naturalWidth,n=i.naturalHeight;else{var t=new Image;t.src=i.src;var o=t.width,n=t.height}s.data("ow",o),s.data("oh",n),"photos"==e.parent().attr("id")&&slider.resize(),"job-photos"==e.parent().attr("id")&&jobs.resize(),a.find(".loading_icon").remove(),s.animate({opacity:1},1e3,"easeInOutExpo")}var a=n.eq(o),i=new Image;i.src=a.data("img"),a.append(i);var s=a.children("img");s.attr("oncontextmenu","return false"),s.attr("ondragstart","return false"),s.css({opacity:"0"}),"photos"==e.parent().attr("id")&&s.addClass("photos_img"),"job-photos"==e.parent().attr("id")&&s.addClass("fullw"),i.complete?t():i.onload=t}var e=$(".flexslider"),n=e.find(".slide-item");e.each(function(e,t){var a="fade"==$(this).data("animation")?"fade":"slide",i=$(this).data("speed")||5e3,s=0==$(this).data("control")?!1:!0,l=1==$(this).data("direction")?!0:!1,r=1==$(this).data("autoplay")?!0:!1,d=1==$(this).data("loop")?!0:!1,c=$(this).flexslider({selector:".slides > li",animation:a,slideshow:r,slideshowSpeed:i,animationLoop:d,smoothHeight:!0,animationSpeed:1e3,easing:"easeInOutExpo",pauseOnAction:!0,pauseOnHover:!1,touch:!0,useCSS:!1,controlNav:s,directionNav:l,prevText:"",nextText:"",itemWidth:".flexslider",before:function(e){var t=e.animatingTo;void 0==n.eq(t).data("img")||n.eq(t).children().is("img")||o(t)}})}),"photos"==e.parent().attr("id")&&o(0),"job-photos"==e.parent().attr("id")&&o(0),$(".flex-control-nav a").text(""),$(".flex-control-nav a").addClass("icon-record trans"),$(".flex-direction-nav a").addClass("trans"),$(".flex-prev").addClass("icon-arrow-left3"),$(".flex-next").addClass("icon-arrow-right3"),$("#banner .flex-control-nav").addClass("wrap"),e.find(".prev_btn").click(function(){e.flexslider("prev")}),e.find(".next_btn").click(function(){e.flexslider("next")}),n.length<=1&&(e.find(".prev_btn").remove(),e.find(".next_btn").remove(),$(".flex-control-nav").remove())},resize:function(){function o(o){var e=o.data("ow"),n=o.data("oh"),t=80,a,i,s,l,r;$(window).width()<768&&(t=0),a=$(window).width()-2*t,i=$(window).height()-2*t,s=e/n,l=a/i,r=s>l?a/e:i/n,o.css({width:r*e+"px",height:r*n+"px",top:i/2-r*n/2+t+"px",left:a/2-r*e/2+t+"px"})}var e=$(".photos_img");e.each(function(){o($(this))})}},proloader={init:function(){function o(){$(".loading_icon").remove(),e.animate({opacity:1},1e3,"easeInOutExpo",function(){$(window).scrollTop()<300}),e.css("visibility","visible")}var e=$(".proloader"),n=new Image;n.src=e.find(".proloader_img").data("loadimg"),n.complete?o():n.onload=o}},footer={init:function(){var o=$("footer .icons .jsbtn"),e,n;o.each(function(){var o=$($(this).data("target"));$(this).click(function(){o.hasClass("show")?(o.removeClass("show"),$(this).removeClass("active")):(void 0!=e&&e.removeClass("show"),void 0!=n&&n.removeClass("active"),o.addClass("show"),$(this).addClass("active"),e=o,n=$(this))})})}},mouseScroll={canScroll:!1,init:function(){$("html").hasClass("lt-ie9")||$(document).bind("mousewheel",mouseScroll.m_wheel)},m_wheel:function(o,e){mouseScroll.canScroll=!1,prevent.disableScroll();var n=document.body.clientHeight,t=$(".mscroll:above-the-top").last(),a=$(".mscroll:in-viewport"),i=$(".mscroll:below-the-fold").first(),s;if(s=a.length>1?o.deltaY>0?a.first():a.last():o.deltaY>0?t:i,s.length>0&&s.height()<=n){if(o.deltaY<0)var l=s.offset().top-$(window).scrollTop();else var l=$(window).scrollTop()-s.offset().top;l>0&&n>=l&&(mouseScroll.canScroll=!0,mouseScroll.scrollto(s))}mouseScroll.canScroll||prevent.enableScroll()},scrollto:function(o){var e=document.body.clientHeight;if($(document).unbind("mousewheel",mouseScroll.m_wheel),window.onmousewheel=function(){return!1},$(window).scrollTo(o,1500,{easing:"easeInOutExpo",onAfter:function(){$("html").hasClass("lt-ie9")||$(document).bind("mousewheel",mouseScroll.m_wheel),window.onmousewheel=function(){return!0},o.find(".anima_3d_top").removeClass("animation_3d_top"),o.find(".anima_3d_bottom").removeClass("animation_3d_bottom")}}),$("html").hasClass("csstransforms3d")&&$("html").hasClass("cssanimations")){var n=o.offset().top-$(window).scrollTop();(-e>=n||n>=e)&&(o.find(".anima_3d_top").addClass("animation_3d_top"),o.find(".anima_3d_bottom").addClass("animation_3d_bottom"),o.find(".anim_emt").removeClass("anim_emt"))}}},down_arrow={init:function(){var o=$(".down_arrow"),e=function(){$(window).on("scroll",function(){$(".down_arrow").fadeOut(500),$(document).unbind("scroll",e)})};$(document).bind("scroll",e)}},jobs={wd_scroll:0,init:function(){$("#job_btns li a").each(function(o){$(this).click(function(){jobs.showInfo($("#job_infos"),o)})}),$("#process_btn").click(function(){jobs.showInfo($("#job_process"))}),$(".pop_bg").bind("click",jobs.closeInfo),$(".pop_window .box .cont").bind("mousewheel",function(o){o.preventDefault();var e=this.scrollTop;this.scrollTop=e+o.deltaY*o.deltaFactor*-1}),jobs.resize(),$(window).resize(function(){jobs.resize()})},showInfo:function(o,e){wd_scroll=$(window).scrollTop(),o.find(".item").each(function(o){$(this).hide(),o==e&&$(this).show()}),o.find(".box .cont").scrollTo(0),o.addClass("pop-show"),$(document).unbind("mousewheel",mouseScroll.m_wheel),prevent.disableScroll()},closeInfo:function(){$(window).scrollTo(wd_scroll,500),$(".pop-show").removeClass("pop-show"),$(document).bind("mousewheel",mouseScroll.m_wheel),prevent.enableScroll()},resize:function(){var o=1600/900,e=$(window).width()/$(window).height();o>e?$("#job-photos").css("height","auto"):$("#job-photos").css("height","100%")}},prevent={init:function(){function o(o){o=o||window.event,o.preventDefault&&o.preventDefault(),o.returnValue=!1}function e(e){for(var n=keys.length;n--;)if(e.keyCode===keys[n])return void o(e)}function n(e){o(e)}function t(){window.addEventListener&&window.addEventListener("DOMMouseScroll",n,!1),window.onmousewheel=document.onmousewheel=n,document.onkeydown=e}function a(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",n,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null}this.disableScroll=t,this.enableScroll=a}};$(document).ready(function(){var o=navigator.userAgent;(o.match(/iPhone/i)||o.match(/iPad/i))&&o.match(/OS [8-9]_\d[_\d]* like Mac OS X/i)&&$("body").addClass("ios8"),nav.init(),sharenav.init(),footer.init(),prevent.init(),$("img").attr("oncontextmenu","return false"),$("img").attr("ondragstart","return false")});